<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Simple Web Notepad</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <div class="app" id="app">
        <header>
            <h1>Simple Web Notepad</h1>
            <div class="toolbar">
                <button id="toggleMarkdownBtn" title="Toggle Markdown Preview (Ctrl+M)">
                    <span id="markdownIcon">MD</span> Markdown: <span id="markdownStatus">Off</span>
                </button>
                <button id="newBtn" title="New (Ctrl/Cmd+N)">New</button>
                <button id="openBtn" title="Open (Ctrl/Cmd+O)">Open</button>
                <button id="saveBtn" title="Save (Ctrl/Cmd+S)">Save</button>
                <button id="settingsBtn" title="Settings">Settings</button>
                <button id="helpBtn" title="Help">Help</button>
            </div>
        </header>
        <main>
            <section class="editorWrap">
                <div class="editor">
                    <!-- Markdown editor (visible when preview is off) -->
                    <textarea id="editor" spellcheck="false" placeholder="Start typing..."></textarea>
                    
                    <!-- Editable markdown preview (visible when preview is on) -->
                    <div id="markdownPreview" class="markdown-preview" contenteditable="true" spellcheck="false" style="display: none;"></div>
                </div>
                <footer class="status">
                    <div class="counts">
                        <div id="charCount" class="muted">Chars: 0</div>
                        <div id="wordCount" class="muted">Words: 0</div>
                        <div id="selCount" class="muted">Selection: 0</div>
                        <div id="position" class="muted">Ln 1, Col 1</div>
                        <div class="mode-indicator" id="modeIndicator">Plain Text</div>
                    </div>
                </footer>
            </section>
        </main>
    </div>

    <input id="fileInput" type="file" accept=".txt,.md,text/plain,text/markdown" style="display:none" />

    <div id="settingsModal">
        <div id="settingsContent">
            <div id="settingsTabs">
                <button class="tabBtn active" data-tab="editorTab">Editor</button>
                <button class="tabBtn" data-tab="appearanceTab">Appearance</button>
                <button class="tabBtn" data-tab="customTab">Custom</button>
                <button class="tabBtn" data-tab="markdownTab">Markdown</button>
            </div>
            <div style="flex:1; display:flex; flex-direction:column; gap:12px;">
                <div id="editorTab" class="tabContent active">
                    <label>UI Font</label>
                    <div class="searchFontWrapper">
                        <input type="text" id="uiFontInput" placeholder="Search Google Fonts..." />
                        <div class="fontList" id="uiFontList"></div>
                    </div>
                    <label>Notes Font</label>
                    <div class="searchFontWrapper">
                        <input type="text" id="noteFontInput" placeholder="Search Google Fonts..." />
                        <div class="fontList" id="noteFontList"></div>
                    </div>
                    <label>Font Size</label>
                    <input id="fontSize" type="number" min="10" max="48" value="16" />
                    <label>Line Height</label>
                    <input id="lineHeight" type="number" min="1" max="3" step="0.1" value="1.5" />
                    <label>Tab Size (spaces)</label>
                    <select id="tabSize">
                        <option value="2">2 spaces</option>
                        <option value="4" selected>4 spaces</option>
                        <option value="8">8 spaces</option>
                        <option value="tab">Tab character</option>
                    </select>
                </div>
                <div id="appearanceTab" class="tabContent">
                    <label>Theme</label>
                    <select id="themeSelect">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                        <option value="system">System</option>
                    </select>
                    <label>Wrap</label>
                    <select id="wrapToggle">
                        <option value="soft">Wrap</option>
                        <option value="off">No Wrap</option>
                    </select>
                </div>
                <div id="customTab" class="tabContent">
                    <label>Background Color</label>
                    <input type="color" id="bgColorPicker" />
                    <label>Text Color</label>
                    <input type="color" id="textColorPicker" />
                </div>
                <div id="markdownTab" class="tabContent">
                    <label>Markdown Preview Theme</label>
                    <select id="markdownTheme">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                        <option value="github">GitHub Style</option>
                        <option value="solarized">Solarized</option>
                    </select>
                    <label>Enable Syntax Highlighting</label>
                    <input type="checkbox" id="syntaxHighlighting" checked />
                    <label>Auto-preview on .md files</label>
                    <input type="checkbox" id="autoPreviewMd" checked />
                    <label>Preview Font Size</label>
                    <input id="previewFontSize" type="number" min="10" max="24" value="16" />
                </div>
                <button id="closeSettings" style="align-self:flex-end;">Close</button>
            </div>
        </div>
    </div>

    <div id="helpModal">
        <div id="helpContent">
            <div class="helpContent">
                <h3>Simple Web Notepad Help</h3>
                <p>A lightweight, browser-based text editor with persistent storage and Markdown support.</p>
                
                <h4>File Operations</h4>
                <ul>
                    <li><strong>New</strong> (<span class="kbd">Ctrl+N</span>): Clear the editor</li>
                    <li><strong>Open</strong> (<span class="kbd">Ctrl+O</span>): Load a text file from your device</li>
                    <li><strong>Save</strong> (<span class="kbd">Ctrl+S</span>): Download current text as a .txt file</li>
                </ul>
                
                <h4>Markdown Features</h4>
                <ul>
                    <li><strong>Toggle Preview</strong> (<span class="kbd">Ctrl+M</span>): Switch between Markdown source and live preview</li>
                    <li><strong>Editable Preview</strong>: Click and edit directly in the preview mode</li>
                    <li><strong>Live Rendering</strong>: Changes update instantly</li>
                    <li><strong>Syntax Highlighting</strong>: Code blocks with language detection</li>
                    <li><strong>Multiple Themes</strong>: Choose different preview styles</li>
                </ul>
                
                <h4>Editor Features</h4>
                <ul>
                    <li><strong>Auto-save</strong>: Content is saved automatically in your browser</li>
                    <li><strong>Character/Word Count</strong>: Real-time statistics in footer</li>
                    <li><strong>Line & Column Tracking</strong>: Shows current cursor position</li>
                    <li><strong>Tab Support</strong>: Insert spaces or tabs with Tab key</li>
                    <li><strong>Customizable</strong>: Fonts, colors, themes, and more</li>
                </ul>
                
                <h4>Tips</h4>
                <ul>
                    <li>All content persists between browser sessions</li>
                    <li>Supports UTF-8 and Unicode characters</li>
                    <li>Settings are saved per device/browser</li>
                    <li>Click outside modal windows to close them</li>
                    <li>Use Ctrl+M to quickly toggle between Markdown and preview</li>
                    <li>In preview mode, you can edit text directly!</li>
                </ul>
                
                <button id="closeHelp" style="margin-top:16px; float:right;">Close</button>
            </div>
        </div>
    </div>

    <script src="scripts.js"></script>
</body>
</html>